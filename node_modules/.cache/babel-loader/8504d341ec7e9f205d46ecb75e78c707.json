{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Asus/Desktop/test11070/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Asus/Desktop/test11070/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Asus\\\\Desktop\\\\test11070\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useContext}from'react';import{NavLink,useNavigate}from'react-router-dom';import'../stylesheets/notifications.css';import{Row,Col,Container,InputGroup,Button,Modal,FormControl,ListGroup,Badge}from'react-bootstrap';import SearchMembers from'./SearchMembers';import image_S1 from'../images/abstract10.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Notifications=function Notifications(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),fullscreen=_useState2[0],setFullscreen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var handleShow=function handleShow(){setFullscreen(true);setShow(true);};var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),senderProfiles=_useState6[0],setSenderProfiles=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),receiverProfiles=_useState8[0],setReceiverProfiles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showAlert=_useState10[0],setShowAlert=_useState10[1];var handleAlertClose=function handleAlertClose(){setShowAlert(false);};var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),alertMessage=_useState12[0],setAlertMessage=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),alertTitle=_useState14[0],setAlertTitle=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),fetchData=_useState16[0],setFetchData=_useState16[1];var requestSentBYMe=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('https://taskhive-backend-testing.onrender.com/requestSentBYMe',{method:'GET'});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);setReceiverProfiles(data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function requestSentBYMe(){return _ref.apply(this,arguments);};}();var getRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('https://taskhive-backend-testing.onrender.com/getRequest',{method:'GET'});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;console.log(data);setSenderProfiles(data);// console.log(senderProfiles)\n_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function getRequest(){return _ref2.apply(this,arguments);};}();useEffect(function(){getRequest();requestSentBYMe();},[fetchData]);var handleAcceptBtn=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var personId,response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:personId=e.target.id;_context3.prev=1;_context3.next=4;return fetch('https://taskhive-backend-testing.onrender.com/acceptRequest',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({personId:personId})// body: searchInput\n});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:data=_context3.sent;if(response.status===201&&data){setAlertTitle(\"Alert\");setAlertMessage(data.message);setShowAlert(true);setFetchData(data);}_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function handleAcceptBtn(_x){return _ref3.apply(this,arguments);};}();var handleCancelRequest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var personId,response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:personId=e.target.id;_context4.prev=1;_context4.next=4;return fetch('https://taskhive-backend-testing.onrender.com/cancelRequest',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({personId:personId})// body: searchInput\n});case 4:response=_context4.sent;_context4.next=7;return response.json();case 7:data=_context4.sent;if(response.status===201&&data){setAlertTitle(\"Alert\");setAlertMessage(data.message);setShowAlert(true);setFetchData(data);}_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[1,11]]);}));return function handleCancelRequest(_x2){return _ref4.apply(this,arguments);};}();var handleRefreshCompnent=function handleRefreshCompnent(){getRequest();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"navList\",onClick:handleShow,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\",children:\"\\xA0\"}),' ',\"Members\"]}),/*#__PURE__*/_jsxs(Modal,{show:show,fullscreen:fullscreen,onHide:function onHide(){return setShow(false);},\"aria-labelledby\":\"example-modal-sizes-title-sm\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"modalHeader\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-md-center\",children:[/*#__PURE__*/_jsxs(Col,{sm:true,lg:\"5\",children:[/*#__PURE__*/_jsx(Modal.Title,{children:\"Notifications\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(Col,{sm:true,lg:\"6\",children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(SearchMembers,{props:{setFetchData:setFetchData}})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Col,{sm:true,lg:\"1\",children:/*#__PURE__*/_jsx(Button,{className:\"refreshBtn2\",onClick:handleRefreshCompnent,children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons refreshIcon\",children:\"refresh\"})})})]})})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"modalBody\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-md-center\",children:[senderProfiles.map(function(senderProfiles,index){return/*#__PURE__*/_jsx(Col,{sm:true,lg:\"4\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{as:\"li\",className:\"profileMessages\",children:[/*#__PURE__*/_jsx(\"img\",{src:senderProfiles.image,onError:function onError(e){e.target.onError=null;e.target.src=image_S1;},className:\"profileImages\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:senderProfiles.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{id:senderProfiles._id,bg:\"primary\",className:\"sendRequestBtn\",onClick:handleAcceptBtn,children:\"Accept Request\"})]},index)},index);}),receiverProfiles.map(function(receiverProfiles,index){return/*#__PURE__*/_jsx(Col,{sm:true,lg:\"4\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{as:\"li\",className:\"profileMessages\",children:[/*#__PURE__*/_jsx(\"img\",{src:receiverProfiles.image,onError:function onError(e){e.target.onError=null;e.target.src=image_S1;},className:\"profileImages\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:receiverProfiles.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{id:receiverProfiles._id,bg:\"primary\",className:\"sendRequestBtn\",onClick:handleCancelRequest,children:\"Cancel Request\"})]},index)},index);})]})})})})})]}),/*#__PURE__*/_jsxs(Modal,{size:\"sm\",show:showAlert,onHide:handleAlertClose,backdrop:\"static\",keyboard:false,\"aria-labelledby\":\"example-modal-sizes-title-sm\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"modalHeader\",children:/*#__PURE__*/_jsx(Modal.Title,{id:\"example-modal-sizes-title-sm\",children:alertTitle})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"modalBodyStatic\",children:/*#__PURE__*/_jsx(\"p\",{children:alertMessage})}),/*#__PURE__*/_jsx(Modal.Footer,{className:\"modalFooter\",children:/*#__PURE__*/_jsx(Button,{className:\"saveBtn\",onClick:handleAlertClose,children:\"Ok\"})})]})]});};export default Notifications;","map":{"version":3,"sources":["C:/Users/Asus/Desktop/test11070/src/components/Notifications.js"],"names":["React","useState","useEffect","useContext","NavLink","useNavigate","Row","Col","Container","InputGroup","Button","Modal","FormControl","ListGroup","Badge","SearchMembers","image_S1","Notifications","fullscreen","setFullscreen","show","setShow","handleShow","senderProfiles","setSenderProfiles","receiverProfiles","setReceiverProfiles","showAlert","setShowAlert","handleAlertClose","alertMessage","setAlertMessage","alertTitle","setAlertTitle","fetchData","setFetchData","requestSentBYMe","fetch","method","response","json","data","console","log","getRequest","handleAcceptBtn","e","personId","target","id","headers","body","JSON","stringify","status","message","handleCancelRequest","handleRefreshCompnent","map","index","image","onError","src","name","_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\r\nimport { NavLink, useNavigate } from 'react-router-dom'\r\nimport '../stylesheets/notifications.css'\r\nimport { Row, Col, Container, InputGroup, Button, Modal, FormControl, ListGroup, Badge } from 'react-bootstrap';\r\nimport SearchMembers from './SearchMembers';\r\nimport image_S1 from '../images/abstract10.png'\r\n\r\nconst Notifications = () => { \r\n\r\n    const [fullscreen, setFullscreen] = useState(true);\r\n    const [show, setShow] = useState(false);\r\n    const handleShow = () => {setFullscreen(true); setShow(true);}\r\n    const [senderProfiles, setSenderProfiles] = useState([]);\r\n    const [receiverProfiles, setReceiverProfiles] = useState([]);\r\n    const [showAlert, setShowAlert] = useState(false);\r\n    const handleAlertClose = () =>{setShowAlert(false);}\r\n    const [alertMessage, setAlertMessage] = useState(\"\");\r\n    const [alertTitle, setAlertTitle] = useState(\"\");\r\n    const [fetchData, setFetchData] = useState();\r\n\r\n\r\n    const requestSentBYMe = async () =>{\r\n      try {\r\n          const response = await fetch('https://taskhive-backend-testing.onrender.com/requestSentBYMe', { \r\n              method: 'GET',\r\n          })\r\n\r\n          const data = await response.json();\r\n          console.log(data)\r\n          setReceiverProfiles(data);\r\n\r\n      } catch (error) {\r\n          console.log(error)\r\n      }\r\n  }\r\n\r\n\r\n\r\n    const getRequest = async () =>{\r\n        try {\r\n            const response = await fetch('https://taskhive-backend-testing.onrender.com/getRequest', { \r\n                method: 'GET',\r\n            })\r\n\r\n            const data = await response.json();\r\n            console.log(data)\r\n            setSenderProfiles(data);\r\n            // console.log(senderProfiles)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getRequest();\r\n        requestSentBYMe();\r\n    },[fetchData])\r\n\r\n\r\n    const handleAcceptBtn = async (e) =>{\r\n        let personId = e.target.id;\r\n        try {\r\n          const response = await fetch('https://taskhive-backend-testing.onrender.com/acceptRequest', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type' : 'application/json' \r\n            },\r\n            body: JSON.stringify({personId}),\r\n            // body: searchInput\r\n        })\r\n\r\n        let data = await response.json();\r\n\r\n        if(response.status === 201 && data){\r\n          setAlertTitle(\"Alert\");\r\n          setAlertMessage(data.message);\r\n          setShowAlert(true);\r\n          setFetchData(data)\r\n        }\r\n          \r\n      } catch (error) {\r\n        console.log(error)    \r\n      }\r\n        \r\n    }\r\n\r\n\r\n\r\n    const handleCancelRequest = async (e) =>{\r\n      let personId = e.target.id;\r\n      try {\r\n        const response = await fetch('https://taskhive-backend-testing.onrender.com/cancelRequest', {\r\n          method: 'POST',\r\n          headers: {\r\n              'Content-Type' : 'application/json' \r\n          },\r\n          body: JSON.stringify({personId}),\r\n          // body: searchInput\r\n      })\r\n\r\n      let data = await response.json();\r\n\r\n      if(response.status === 201 && data){\r\n        setAlertTitle(\"Alert\");\r\n        setAlertMessage(data.message);\r\n        setShowAlert(true);\r\n        setFetchData(data)\r\n      }\r\n        \r\n    } catch (error) {\r\n      console.log(error)    \r\n    }\r\n\r\n    }\r\n\r\n    const handleRefreshCompnent = () =>{\r\n      getRequest();\r\n    }\r\n\r\n\r\n  return (\r\n    <>\r\n      <ListGroup.Item className='navList' onClick={handleShow}>\r\n        <i className='fa fa-search'>&nbsp;</i>         \r\n        {' '}\r\n        Members\r\n      </ListGroup.Item>\r\n\r\n      <Modal show={show} fullscreen={fullscreen} onHide={()=>setShow(false)} aria-labelledby=\"example-modal-sizes-title-sm\">\r\n        <Modal.Header closeButton className='modalHeader'>\r\n          <Container>\r\n            <Row className=\"justify-content-md-center\">\r\n              <Col sm lg=\"5\">\r\n                <Modal.Title>Notifications</Modal.Title>\r\n                <br></br>\r\n              </Col>\r\n              <Col sm lg=\"6\">\r\n                <Container><SearchMembers props={{setFetchData}}/></Container>  \r\n                <br></br>\r\n              </Col>\r\n              <Col sm lg=\"1\">\r\n                <Button className='refreshBtn2' onClick={handleRefreshCompnent}><i className=\"material-icons refreshIcon\">refresh</i></Button>\r\n              </Col>\r\n            </Row>\r\n          </Container>    \r\n        </Modal.Header>\r\n        <Modal.Body className='modalBody'>\r\n          <Container>\r\n              <Row>\r\n                <Container>\r\n                  <Row className=\"justify-content-md-center\">\r\n                      {senderProfiles.map( (senderProfiles, index) =>\r\n                        <Col sm lg=\"4\" key={index}>\r\n                          <ListGroup.Item as=\"li\" key={index}  className=\"profileMessages\">\r\n                            <img \r\n                              src={senderProfiles.image}\r\n                              onError={(e)=>{e.target.onError = null; e.target.src = image_S1}}\r\n                              className=\"profileImages\"\r\n                            />\r\n                            <br></br>\r\n                            <b>{senderProfiles.name}</b>\r\n                            <br></br>\r\n                            <br></br>\r\n                            <Button id={senderProfiles._id} bg=\"primary\" className=\"sendRequestBtn\" onClick={handleAcceptBtn}>\r\n                              Accept Request\r\n                            </Button>\r\n                          </ListGroup.Item>\r\n                        </Col>\r\n                      )}\r\n                      {receiverProfiles.map( (receiverProfiles, index) =>\r\n                        <Col sm lg=\"4\" key={index}>\r\n                          <ListGroup.Item as=\"li\" key={index}  className=\"profileMessages\">\r\n                            <img \r\n                              src={receiverProfiles.image}\r\n                              onError={(e)=>{e.target.onError = null; e.target.src = image_S1}}\r\n                              className=\"profileImages\"\r\n                            />\r\n                            <br></br>\r\n                            <b>{receiverProfiles.name}</b>\r\n                            <br></br>\r\n                            <br></br>\r\n                            <Button id={receiverProfiles._id} bg=\"primary\" className=\"sendRequestBtn\" onClick={handleCancelRequest}>\r\n                              Cancel Request\r\n                            </Button>\r\n                          </ListGroup.Item>\r\n                        </Col>\r\n                      )}\r\n                  </Row>\r\n                </Container>\r\n              </Row>\r\n          </Container>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n\r\n\r\n\r\n      {/* Alert Modal */}\r\n\r\n      <Modal size=\"sm\" show={showAlert} onHide={handleAlertClose} backdrop=\"static\" keyboard={false} aria-labelledby=\"example-modal-sizes-title-sm\">\r\n            <Modal.Header closeButton className='modalHeader'>\r\n                <Modal.Title id=\"example-modal-sizes-title-sm\">{alertTitle}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body className='modalBodyStatic'>\r\n                <p>{alertMessage}</p>\r\n            </Modal.Body>\r\n            <Modal.Footer className='modalFooter'>\r\n                <Button className='saveBtn' onClick={handleAlertClose}>Ok</Button> \r\n            </Modal.Footer>\r\n            </Modal>\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Notifications"]},"metadata":{},"sourceType":"module"}